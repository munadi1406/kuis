---
import Dashboard from "../layouts/Dashboard.astro"
import { createClient } from '@supabase/supabase-js'
import UsersData from "./users/UsersData";

const supabase = createClient(import.meta.env.SUPABASE_URL, import.meta.env.SUPABASE_SERVICE_KEY, {
  auth: {
    autoRefreshToken: false,
    persistSession: false
  }
})

const { data: { users }, error } = await supabase.auth.admin.listUsers()
---
<Dashboard title="Users">
    <UsersData data={users}/>
</Dashboard> 